{"version":3,"sources":["../node_modules/react-peer/node_modules/peerjs/dist sync","PokerPoints.ts","StateView.tsx","Poker.tsx","Home.tsx","PokerAdmin.tsx","Join.tsx","About.tsx","App.tsx","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","PokerPoints","Classic","Fibonacci","StateView","peerId","state","onSelectPoints","useState","undefined","selectedPoints","setSelectedPoints","updateSelectedPoints","points","useEffect","subject","totalUsers","users","length","votedUsers","filter","user","voted","allVoted","total","forEach","average","allAgree","Set","map","size","className","Pagination","pokerPoints","Item","disabled","active","onClick","bind","ProgressBar","now","label","variant","end","Math","ceil","style","opacity","index","width","title","name","Poker","match","params","stream","setStream","useReceivePeerState","brokerId","metadata","localStorage","getItem","isConnected","error","connection","peer","fullScreenHandle","useFullScreenHandle","showStateView","setShowStateView","console","on","call","answer","MediaStream","isUrl","URL","Badge","pill","toString","Button","event","navigator","clipboard","writeText","window","location","origin","href","target","rel","handle","sharingScreen","onDoubleClick","exit","enter","muted","autoPlay","ref","instance","srcObject","onMouseEnter","onMouseLeave","send","Home","history","setName","setPoints","v4","sessionId","setSessionId","Jumbotron","Form","onSubmit","preventDefault","setItem","push","Group","Label","Control","placeholder","aria-label","minLength","maxLength","isValid","value","onChange","as","custom","defaultValue","Object","key","join","InputGroup","Append","type","PokerAdmin","setSubject","votes","setVotes","usePeerState","setState","connections","setPartialState","useCallback","partialState","mapUsers","conn","open","some","shareScreen","getVideoTracks","addEventListener","close","startScreenShare","getTracks","track","stop","mediaDevices","getDisplayMedia","then","alert","updatePoints","resetState","initialized","data","destroy","ButtonGroup","FormControl","Join","About","version","author","repository","url","App","Navbar","bg","Container","to","Brand","alt","src","height","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c93a0248.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 55;","const PokerPoints: { [key: string]: number[] } = {\n    Classic: [0, 1, 2, 3, 5, 8, 13, 20, 40, 100],\n    Fibonacci: [0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]\n};\n\nexport default PokerPoints;","import React, {useEffect, useState} from 'react';\nimport State from \"./State\";\nimport {Pagination, ProgressBar} from \"react-bootstrap\";\nimport PokerPoints from \"./PokerPoints\";\nimport {FaUserTimes, FaUserCheck, FaHandshake} from \"react-icons/fa\";\nimport CountUp from 'react-countup';\n\ninterface Props {\n    state: State,\n    onSelectPoints: (points: number | undefined) => void,\n    peerId: string\n}\n\nfunction StateView({peerId, state, onSelectPoints}: Props) {\n    const [selectedPoints, setSelectedPoints] = useState<number | undefined>(undefined);\n\n    function updateSelectedPoints(points: number) {\n        if (points === selectedPoints) {\n            setSelectedPoints(undefined);\n            onSelectPoints(undefined);\n        } else {\n            setSelectedPoints(points);\n            onSelectPoints(points)\n        }\n    }\n\n    useEffect(() => {\n        setSelectedPoints(undefined);\n    }, [state.subject]);\n\n    const totalUsers = state.users.length;\n    const votedUsers = state.users.filter(user => user.voted).length;\n    const allVoted = totalUsers === votedUsers;\n\n    var total = 0;\n    state.users.forEach(user => total += user.points || 0);\n    const average = total / state.users.length;\n    const allAgree = allVoted && new Set(state.users.map(user => user.points)).size === 1;\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-center\">\n                <Pagination size=\"lg\">\n                    {PokerPoints[state.pokerPoints].map(points =>\n                        <Pagination.Item key={points} disabled={state.subject.length === 0} active={points === selectedPoints}\n                                         onClick={updateSelectedPoints.bind(null, points)}>\n                            {points}\n                        </Pagination.Item>\n                    )}\n                </Pagination>\n            </div>\n            <ProgressBar now={(100 * votedUsers) / totalUsers} label={`${votedUsers}/${totalUsers}`}\n                         variant={allVoted ? \"primary\" : \"danger\"}\n                         className=\"mb-3\" />\n            <h2 className=\"d-flex justify-content-center\">{(average && <CountUp end={Math.ceil(average)} />) || '???'}</h2>\n            <h2 className=\"d-flex justify-content-center\">\n                <FaHandshake style={{opacity: allVoted ? 1 : 0}} className={allVoted && allAgree ? \"text-success\" : \"text-danger\"}/>\n            </h2>\n            <div className=\"d-flex justify-content-center\">\n                {state.users.map((user, index) =>\n                    <div key={index} className=\"img-thumbnail\" style={{width: 128}} title={user.name}>\n                        <h6 className=\"text-center text-muted\">\n                            {typeof user.points === \"number\" ? <CountUp end={user.points}/> : (user.voted ? '!!!' : '???')}\n                        </h6>\n                        <div className=\"d-flex justify-content-center\">\n                            {user.voted ?\n                                <FaUserCheck className={user.voted ? 'text-primary' : 'text-danger'} size=\"80%\" />\n                                :\n                                <FaUserTimes className={user.voted ? 'text-primary' : 'text-danger'} size=\"80%\" />\n                            }\n                        </div>\n                        <h5 className=\"text-center text-truncate\">{user.name}</h5>\n                    </div>\n                )}\n            </div>\n        </>\n    );\n}\n\nexport default StateView;","import React, {useEffect, useState} from 'react';\nimport {match, RouteComponentProps} from 'react-router';\nimport {Badge, Button} from \"react-bootstrap\";\nimport {FaCopy} from \"react-icons/fa\";\nimport {useReceivePeerState} from \"react-peer\";\nimport State from \"./State\";\nimport StateView from \"./StateView\";\nimport {FullScreen, useFullScreenHandle} from \"react-full-screen\";\n\ninterface Props extends RouteComponentProps {\n    match: match<{ id: string }>\n}\n\nfunction Poker({match}: Props) {\n    const id = match.params.id;\n\n    const [stream, setStream] = useState<MediaStream | null>(null);\n    const [state, isConnected, error, connection, peer] = useReceivePeerState<State>(id, {brokerId: ''}, {metadata: {name: localStorage.getItem('name')}});\n    const fullScreenHandle = useFullScreenHandle();\n    const [showStateView, setShowStateView] = useState(false);\n\n    useEffect(() => {\n        if (error) {\n            console.error('PeerJS error: ', error);\n        }\n    }, [error]);\n\n    useEffect(() => {\n        peer?.on('call', function (call) {\n            call.answer(new MediaStream());\n            call.on('stream', (stream) => {\n                setStream(stream);\n            });\n            call.on('close', setStream.bind(null, null));\n        });\n    }, [connection, peer]);\n\n    var isUrl = false;\n    try {\n        if (state && state.subject) {\n            new URL(state && state.subject);\n            isUrl = true;\n        }\n    } catch (e) {\n        isUrl = false;\n    }\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <h1>Poker</h1>\n                <Badge pill variant={isConnected && !error ? 'success' : 'danger'}>\n                    {isConnected && !error ? 'Connected' : (error && error.toString()) || 'Connecting...'}\n                </Badge>\n                <Button onClick={event => navigator.clipboard.writeText(window.location.origin + '/join/' + id)}><FaCopy /> Copy invite link</Button>\n            </div>\n            {\n                isUrl ?\n                    <a href={state && state.subject} target=\"_blank\" rel=\"noreferrer noopener\">\n                        <h2 className=\"text-truncate text-center\">{state && state.subject}</h2>\n                    </a>\n                    :\n                    <h2 className=\"text-truncate text-center\">{(state && state.subject) || 'Waiting for subject...'}</h2>\n            }\n            <FullScreen handle={fullScreenHandle}>\n                <div className=\"bg-white\">\n                    {stream && state && state.sharingScreen &&\n                    <div className=\"d-flex justify-content-center\">\n                        <video style={{opacity: showStateView ? 0.05 : 1.0}}\n                               onDoubleClick={fullScreenHandle.active ? fullScreenHandle.exit : fullScreenHandle.enter} muted autoPlay\n                               width={fullScreenHandle.active ? '100%' : '100%'}\n                               ref={instance => {\n                                   if (instance && instance.srcObject !== stream) {\n                                       instance.srcObject = stream;\n                                   }\n                               }}\n                        />\n                    </div>}\n                    <div style={{opacity: showStateView ? 1.0 : 0.05}} className=\"container bg-white fixed-bottom mb-5\"\n                         onMouseEnter={setShowStateView.bind(null, true)} onMouseLeave={setShowStateView.bind(null, false)}>\n                        <StateView peerId={(peer && peer.id) || ''}\n                                   state={state || {subject: '', users: [], pokerPoints: 'Classic', sharingScreen: false}}\n                                   onSelectPoints={points => connection && connection.send({points: points})} />\n                    </div>\n                </div>\n            </FullScreen>\n        </>\n    );\n}\n\nexport default Poker;\n","import React, {useState} from 'react';\nimport {Button, Form, InputGroup, Jumbotron} from \"react-bootstrap\";\nimport PokerPoints from \"./PokerPoints\";\nimport {RouteComponentProps} from \"react-router\";\nimport {v4} from \"uuid\";\n\ninterface Props extends RouteComponentProps {\n}\n\nfunction Home({history}: Props) {\n    const [name, setName] = useState(localStorage.getItem('name') || '');\n    const [points, setPoints] = useState(localStorage.getItem('points') || 'Classic');\n    const [sessionId, setSessionId] = useState(v4());\n\n    return (\n        <Jumbotron>\n            <h1>Welcome to Planning Poker!</h1>\n            <p>\n                Planning Poker is built by Topicus Overheid on innovation day to facilitate remote planning poker.\n            </p>\n            <Form onSubmit={event => {\n                event.preventDefault();\n                localStorage.setItem('name', name);\n                localStorage.setItem('points', points);\n                history.push('/poker-admin/' + sessionId);\n            }}>\n                <Form.Group>\n                    <Form.Label>Name</Form.Label>\n                    <Form.Control placeholder=\"Name\" aria-label=\"Name\" minLength={3} maxLength={255} isValid={name.length >= 3} value={name}\n                                  onChange={event => {\n                                      setName(event.target.value);\n                                  }} />\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>Points</Form.Label>\n                    <Form.Control as=\"select\" custom defaultValue={points} onChange={event => {\n                        setPoints(event.target.value);\n                    }}>\n                        {Object.keys(PokerPoints).map(key => <option key={key} value={key}>{key} ({PokerPoints[key].join(', ')})</option>)}\n                    </Form.Control>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>Session ID</Form.Label>\n                    <InputGroup>\n                        <Form.Control placeholder=\"Session ID\" aria-label=\"Session ID\" minLength={8} maxLength={255}\n                                      isValid={sessionId.length >= 8} value={sessionId}\n                                      onChange={event => {\n                                          setSessionId(event.target.value);\n                                      }} />\n                        <InputGroup.Append>\n                            <Button variant=\"outline-secondary\" onClick={event => setSessionId(v4())}>Generate</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                </Form.Group>\n                <Button type=\"submit\">Start</Button>\n            </Form>\n        </Jumbotron>\n    );\n}\n\nexport default Home;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport {match, RouteComponentProps} from 'react-router';\nimport {Button, ButtonGroup, FormControl, InputGroup} from \"react-bootstrap\";\nimport {FaCopy, FaDesktop} from \"react-icons/fa\";\nimport {usePeerState} from \"react-peer\";\nimport Peer from \"peerjs\";\nimport User from \"./User\";\nimport State from \"./State\";\nimport StateView from \"./StateView\";\n\ninterface Props extends RouteComponentProps {\n    match: match<{ id: string }>\n}\n\nfunction PokerAdmin({match, history, location}: Props) {\n    const id = match.params.id;\n    const [subject, setSubject] = useState('');\n    const [selectedPoints, setSelectedPoints] = useState<number | undefined>(undefined);\n    const [votes, setVotes] = useState<{ [peerId: string]: number | undefined }>({});\n    const [stream, setStream] = useState<MediaStream | null>();\n\n    const [state, setState, brokerId, connections, peer, error] = usePeerState<State>({\n        subject: '',\n        users: [],\n        pokerPoints: localStorage.getItem('points') || 'Classic',\n        sharingScreen: false\n    }, {brokerId: id});\n\n    useEffect(() => {\n        if (error) {\n            console.error('PeerJS error: ', error);\n        }\n    }, [error]);\n\n    const setPartialState = useCallback((partialState: State | object) => {\n        setState({...state, ...partialState});\n    }, [state, setState]);\n\n    const mapUsers = useCallback(() => {\n        const users: User[] = connections.filter(conn => conn.open)\n            .map(conn => ({peerId: conn.peer, name: conn.metadata.name, points: votes[conn.peer], voted: typeof votes[conn.peer] === 'number'}));\n        users.push({peerId: id, name: localStorage.getItem('name') || 'Admin', points: selectedPoints, voted: typeof selectedPoints === 'number'})\n        if (users.some(user => !user.voted)) {\n            users.forEach(user => user.points = undefined);\n        }\n        return users;\n    }, [connections, votes, selectedPoints, id]);\n\n    const shareScreen = useCallback((conn: Peer.DataConnection, stream: MediaStream) => {\n        const call = peer && peer.call(conn.peer, stream);\n        if (call) {\n            stream.getVideoTracks()[0].addEventListener('ended', function () {\n                call.close();\n            });\n        }\n    }, [peer]);\n\n    const startScreenShare = useCallback(() => {\n        if (stream) {\n            stream.getTracks().forEach(track => track.stop());\n        }\n        if ('getDisplayMedia' in navigator.mediaDevices) {\n            // @ts-ignore\n            navigator.mediaDevices.getDisplayMedia({}).then((stream: MediaStream) => {\n                setStream(stream);\n                stream.getVideoTracks()[0].addEventListener('ended', function () {\n                    setStream(null);\n                });\n                connections.forEach(conn => {\n                    if (conn.open) {\n                        // @ts-ignore\n                        shareScreen(conn, stream);\n                    }\n                });\n            });\n        } else {\n            alert('Screen sharing is not supported.')\n        }\n    }, [stream, connections, shareScreen]);\n\n    const updatePoints = useCallback((peerId: string, points: number | undefined) => {\n        votes[peerId] = points;\n        setVotes({...votes});\n    }, [votes]);\n\n    const updateSelectedPoints = useCallback((points: number | undefined) => {\n        setSelectedPoints(points);\n        updatePoints(id, points);\n    }, [id, updatePoints]);\n\n    const resetState = useCallback(() => {\n        setSelectedPoints(undefined);\n        setSubject('');\n        setVotes({});\n        setPartialState({subject: '', users: mapUsers()});\n    }, [mapUsers, setPartialState]);\n\n    useEffect(() => {\n        setPartialState({sharingScreen: stream != null})\n    }, [stream]);\n\n    useEffect(() => {\n        connections.forEach(conn => {\n            if (!conn.metadata.initialized) {\n                conn.open = true;\n                conn.metadata.initialized = true;\n                conn.on('open', function () {\n                    if (stream) {\n                        // @ts-ignore\n                        shareScreen(conn, stream);\n                    }\n                });\n\n                conn.on('data', data => {\n                    if (data && 'points' in data) {\n                        updatePoints(conn.peer, data.points);\n                    }\n                });\n            }\n        })\n    }, [connections, stream, shareScreen, updatePoints]);\n\n    useEffect(() => {\n        setPartialState({users: mapUsers()});\n    }, [mapUsers]);\n\n    useEffect(() => {\n        return () => {\n            if (stream) {\n                stream.getTracks().forEach(value => value.stop());\n            }\n        }\n    }, [stream]);\n\n    useEffect(() => {\n        return () => {\n            if (peer) {\n                peer.destroy();\n            }\n        }\n    }, [peer]);\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <h1>Poker Admin</h1>\n                <ButtonGroup>\n                    {'getDisplayMedia' in navigator.mediaDevices &&\n                        <Button onClick={startScreenShare}>\n                            <FaDesktop /> Share screen\n                        </Button>\n                    }\n                    <Button onClick={event => navigator.clipboard.writeText(window.location.origin + '/join/' + id)}>\n                        <FaCopy /> Copy invite link\n                    </Button>\n                </ButtonGroup>\n            </div>\n            <InputGroup className=\"mb-3\">\n                <FormControl placeholder=\"Subject\" aria-label=\"Subject\" value={subject} onChange={event => {\n                    setSubject(event.target.value);\n                    setPartialState({subject: event.target.value});\n                }} />\n                <InputGroup.Append>\n                    <Button variant=\"outline-secondary\" onClick={resetState}>Reset</Button>\n                </InputGroup.Append>\n            </InputGroup>\n            <StateView peerId={id} state={state} onSelectPoints={updateSelectedPoints} />\n        </>\n    );\n}\n\nexport default PokerAdmin;\n","import React, {useState} from 'react';\nimport {match, RouteComponentProps} from 'react-router';\nimport {Button, Form} from \"react-bootstrap\";\n\ninterface Props extends RouteComponentProps {\n    match: match<{ id: string }>\n}\n\nfunction Join({match, history}: Props) {\n    const id = match.params.id;\n    const [name, setName] = useState(localStorage.getItem('name') || '');\n\n    return (\n        <>\n            <h1>Join {id}</h1>\n            <Form onSubmit={event => {\n                event.preventDefault();\n                localStorage.setItem('name', name);\n                history.push('/poker/' + id);\n            }}>\n                <Form.Group>\n                    <Form.Label>Name</Form.Label>\n                    <Form.Control placeholder=\"Name\" aria-label=\"Name\" minLength={3} maxLength={255} isValid={name.length >= 3} value={name} onChange={event => setName(event.target.value)} />\n                </Form.Group>\n                <Button type=\"submit\">Start</Button>\n            </Form>\n        </>\n    );\n}\n\nexport default Join;\n","import React from 'react';\nimport {author, repository, version} from \"../package.json\";\n\nfunction About() {\n    return (\n        <>\n            <h1>About Planning Poker {version}</h1>\n            <p>Planning Poker is an opensource planning poker tool built on innovation day by {author.name}</p>\n            <a href={repository.url}>{repository.url}</a>\n\n            <h2>PeerJS</h2>\n            <p>Planning Poker uses PeerJS for peer-to-peer communication, for setting up peer-to-peer connections PeerJS uses the PeerServer Cloud service.</p>\n            <a href=\"https://peerjs.com/peerserver.html\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n        </>\n    );\n}\n\nexport default About;","import React from 'react';\nimport {BrowserRouter, Route} from \"react-router-dom\";\nimport {LinkContainer} from \"react-router-bootstrap\";\nimport {Container, Navbar} from \"react-bootstrap\";\nimport Poker from \"./Poker\";\nimport Home from \"./Home\";\nimport PokerAdmin from \"./PokerAdmin\";\nimport Join from \"./Join\";\nimport About from \"./About\";\n\nfunction App() {\n    return (\n        <BrowserRouter>\n            <Navbar bg=\"dark\" variant=\"dark\">\n                <Container>\n                    <LinkContainer to=\"/\">\n                        <Navbar.Brand>\n                            <img\n                                alt=\"Logo\"\n                                src=\"/icon.png\"\n                                width=\"30\"\n                                height=\"30\"\n                                className=\"d-inline-block align-top img-thumbnail rounded-circle\"\n                            /> Planning Poker\n                        </Navbar.Brand>\n                    </LinkContainer>\n                </Container>\n            </Navbar>\n            <Container>\n                <Route exact path=\"/\" component={Home} />\n                <Route exact path=\"/poker-admin/:id\" component={PokerAdmin} />\n                <Route exact path=\"/poker/:id\" component={Poker} />\n                <Route exact path=\"/join/:id\" component={Join} />\n                <Route exact path=\"/about\" component={About} />\n            </Container>\n            <footer className=\"py-3 fixed-bottom bg-light\">\n                <Container>\n                    <LinkContainer to=\"/about\">\n                        <span className=\"text-muted\">Planning Poker © Topicus Overheid 2020</span>\n                    </LinkContainer>\n                </Container>\n            </footer>\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}